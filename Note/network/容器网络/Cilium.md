##### 基于API感知网络的安全特滤

1. iptable在微服务时代的限制
    
    1. 容器部署的是高度动态变化的
        
    2. 现有的网络安全机制（iptables）仅在网络层和传输层（IP和端口）
        
    3. 缺乏对微服务的可见性
        

##### Cilium功能

1. 容器的网络连接
    
    1. Overlay(VXLAN和Geneve)
        
    2. 直接路由
        
2. 基于策略的网络安全
    
    1. 基于身份：在每个数据包内将负载和身份信息打包在一起
        
    2. 基于IP/CIDR
        
    3. 基于API
        

##### BPF(Berkeley Packet Filter)

Linux内核的一个高性能沙箱虚拟机，将内核变成可编程的

##### k8s的服务负载均衡

1. iptables性能瓶颈：部署5000个服务时吞吐降低了约30%，10000个服务时大约降了80%
    
2. ipvs性能有很大提升，但是过于通用且很难扩展新特性，并且还是依赖于iptables和ipset做包过滤和SNAT
    
3. BPF底层技术时散列表数据结果，查找和更新路由规则的时间复杂度都是O(1)

